    <!-- Advanced Care Directive Custodian Record Clinical Document:  Global Code Checks for 'CDA Body Level 3A Data Elements'. -->

    <!-- Context: ClinicalDocument/component/structuredBody -->

    <!-- Status: Last Reviewed: 
         Status: Last Updated: 03/07/2012 -->

    <pattern name="p-Advanced_Care_Directive_Custodian_Record_3A_Global_Code_Checks-errors"
        id="p-Advanced_Care_Directive_Custodian_Record_3A_Global_Code_Checks-errors"
        see="#p-Advanced_Care_Directive_Custodian_Record_3A_Global_Code_Checks-errors">


       
       <!--
103.16233            DATE OF BIRTH IS CALCULATED FROM AGE
-->     
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='102.16080']/cda:entry/cda:observation/cda:code[(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')='DATE OF BIRTH IS CALCULATED FROM AGE') or (@code='103.16233')]">       

            <assert test="@code = '103.16233'"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'code' attribute shall
                be '103.16233'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
            <assert test="(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')='DATE OF BIRTH IS CALCULATED FROM AGE')"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'displayName' attribute shall
                be 'Date of Birth is Calculated From Age'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
        </rule>

<!--
103.16233            DATE OF BIRTH ACCURACY INDICATOR
-->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='102.16080']/cda:entry/cda:observation/cda:code[(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')='DATE OF BIRTH ACCURACY INDICATOR') or (@code='102.16234')]">       
             
            <assert test="@code = '102.16234'"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'code' attribute shall
                be '103.16234'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
            <assert test="(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')='DATE OF BIRTH ACCURACY INDICATOR')"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'displayName' attribute shall
                be 'Date of Birth Accuracy Indicator'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
        </rule>

<!--
103.20109            AGE
-->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='102.16080']/cda:entry/cda:observation/cda:code[(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')='AGE') or (@code='103.20109')]">       
            
            <assert test="@code = '103.20109'"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'code' attribute shall
                be '103.20109'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
            <assert test="(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')='AGE')"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'displayName' attribute shall
                be 'Age'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
        </rule>
 
<!--
103.16279            AGE ACCURACY INDICATOR
-->   
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='102.16080']/cda:entry/cda:observation/cda:code[(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='AGE ACCURACY INDICATOR') or (@code='103.16279')]">       
            
            <assert test="@code = '103.16279'"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'code' attribute shall
                be '103.16279'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
            <assert test="(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='AGE ACCURACY INDICATOR')"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'displayName' attribute shall
                be 'Age Accuracy Indicator'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
        </rule>
        
<!--
103.16249           BIRTH PLURALITY
-->          
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='102.16080']/cda:entry/cda:observation/cda:code[(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='BIRTH PLURALITY') or (@code='103.16249')]">       
          
            <assert test="@code = '103.16249'"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'code' attribute shall
                be '103.16249'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
            <assert test="(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='BIRTH PLURALITY')"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'displayName' attribute shall
                be 'Birth Plurality'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
        </rule>

<!--
102.16252           DATE OF DEATH ACCURACY INDICATOR
-->   
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='102.16080']/cda:entry/cda:observation/cda:code[(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='DATE OF DEATH ACCURACY INDICATOR') or (@code='102.16252')]">       
            
            <assert test="@code = '102.16252'"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'code' attribute shall
                be '102.16252'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
            <assert test="(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='DATE OF DEATH ACCURACY INDICATOR')"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'displayName' attribute shall
                be 'Date of Death Accuracy Indicator'. Refer to section "'6.1.2 Subject of Care'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
        </rule>


       
 <!--
102.16690           ACD CUSTODIAN ENTRY
-->   
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16694']/cda:entry/cda:act[cda:code[(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='ACD CUSTODIAN ENTRY') or (@code='102.16690')]]/cda:code">       
            
            <assert test="@code = '102.16690'"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'code' attribute shall
                be '102.16690'. Refer to section "'7.1.1.1 ACD Custodian Entry'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
            <assert test="(translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') ='ACD CUSTODIAN ENTRY')"
                >Error: Advanced Care Directive Custodian Record - Global Code Checks - The 'code' tag 'displayName' attribute shall
                be 'ACD Custodian Entry'. Refer to section "'7.1.1.1 ACD Custodian Entry'" of the 
                Advanced_Care_Directive_Custodian_Record_CDA_Implementation_Guide_v1.0.</assert>
            
        </rule>
       


    </pattern>