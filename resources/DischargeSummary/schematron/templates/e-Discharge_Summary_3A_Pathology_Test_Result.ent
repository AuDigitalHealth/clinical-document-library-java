
    <!-- Context: ClinicalDocument/component/structuredBody/component[diag_inv]/section/ -->

    <!-- Discharge Summary Clinical Document:  7.1.1.5.1 Pathology Test Result -->


    <!-- Status: Last Reviewed: 
         Status: Last Updated : 11/07/2012
 -->


    <pattern name="p-e-Discharge_Summary_3A_Pathology_Test_Result-errors"
        id="p-e-Discharge_Summary_3A_Pathology_Test_Result-errors"
        see="#p-e-Discharge_Summary_3A_Pathology_Test_Result-errors">

        <!--The top of this section is tested in level 2-->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry[cda:observation/@classCode='OBS']/cda:observation">
<!-- In context.
            <assert test="@classCode = 'OBS'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'classCode' attribute shall contain the value 'OBS'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
-->
            <assert test="@moodCode = 'EVN'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'moodCode' attribute shall contain the value 'EVN'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!--Pathology Test Result Name - 1..1 - errors-->

            <assert test="cda:code">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The
                'code' tag is missing. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:code)> 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!--The code attributes are tested in Global Checks-->

            <!--Laboratory Test Result Identifier - 0..1 - errors-->

            <report test="count(cda:id)> 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'id' tag shall appear only once. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!--The id attributes are tested in Global Checks-->
            
            <!--Test Result Representation - 0..1-->
            
            <report test="count(cda:value)> 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'value' tag shall appear only once. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
         <assert test="not(@nullFlavor)">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result  - The 'observation' tag 'nullFlavor' attribute shall not be
                present. Refer to requirements in the NullFlavor Usage Clarification FAQ and section 6.1.2 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4. </assert>

        </rule>
      
      
      <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry[cda:observation/@classCode='OBS']/cda:observation/cda:code">

            <assert test="not(@nullFlavor)">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result  - The 'code' tag 'nullFlavor' attribute shall not be
                present. Refer to requirements in the NullFlavor Usage Clarification FAQ and section 6.1.2 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4. </assert>
      
     </rule>   
        
        
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:value">
            <!-- Start Mantis Task 2782 -->
            <assert test="not(@xsi:type) or normalize-space(@xsi:type) !=  ''">
                Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'text' tag 'xsi:type' attribute shall contain a value. 
                Refer to section 7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.
            </assert>
            
<!--            <report test="@xsi:type and @xsi:type != 'ED'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The
                'value' tag 'xsi:type' attribute shall contain the value 'ED'. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>-->
            <!-- End Mantis Task 2782 -->
             <assert test="cda:reference or normalize-space(.) != ''">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - 
                 The 'value' tag shall contain a value or a reference. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="@xsi:type">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - 
                The 'value' tag 'xsi:type' attribute is missing. Refer to section 7.1.1.5.1.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            <!-- Start Mantis Task 2782 -->
            <assert test="normalize-space(@xsi:type) = 'ED'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - 
                The 'value' tag 'xsi:type' attribute shall contain a value 'ED'. Refer to section 7.1.1.5.1 and 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            <!-- End Mantis Task 2782 -->
         </rule>


        <!--Diagnostic Service - 0..1 - errors-->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:observation/cda:code/@code='310074003']">

            <assert test="@typeCode = 'COMP'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'typeCode' attribute shall contain the value 'COMP'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:observation) > 1">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'observation' tag shall appear only once. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>


        </rule>
        
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:observation[cda:code/@code='310074003']">
            
            <assert test="@classCode = 'OBS'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'classCode' attribute shall contain the value 'OBS'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="@moodCode = 'EVN'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'moodCode' attribute shall contain the value 'EVN'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:code) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>


            <assert test="cda:value">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -
                The 'value' tag is missing. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:value) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'value' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>
        
        <rule context="cda:code[@code='310074003']">
                        
               <assert test="@codeSystem  = '2.16.840.1.113883.6.96'">Error: e-Discharge Summary -
                   7.1.1.5.1 Pathology Test Result - The 'code' tag 'codeSystem' attribute shall be
                   '2.16.840.1.113883.6.96'. Refer to section 7.1.1.5.1 of the
                   e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
               
               <assert test="@codeSystemVersion  = '20110531'">Error: e-Discharge Summary - 7.1.1.5.1
                   Pathology Test Result - The 'code' tag 'codeSystemVersion' attribute shall be
                   '20110531'. Refer to section 7.1.1.5.1 of the
                   e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
               
               <assert
                   test="translate(@codeSystemName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'SNOMED CT-AU'"
                   > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                   'codeSystemName' attribute shall contain the value 'NCTIS Data Components'. Refer to section
                   7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
               
               <assert
                   test="translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'PATHOLOGY SERVICE'"
                   > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                   'displayName' attribute shall contain the value 'Pathology Test Result'. Refer to section 7.1.1.5.1
                   of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
              
        </rule>

        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:observation[cda:code/@code='310074003']/cda:value">
            
            <assert test="@xsi:type = 'CD'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'value' tag 'xsi:type' attribute shall contain the value 'CD'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="cda:originalText and normalize-space(cda:originalText) = ''">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test
                Result - The 'originalText' tag
                shall contain a value. Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <report test="count(cda:originalText) > 1">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test
                Result - The 'originalText' tag
                shall appear only once. Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <assert test="cda:originalText or cda:translation or (@code and @codeSystem) or @nullFlavor"
                >Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'value' tag shall have 'originalText' or 'translation' tag or
                'code and codeSystem' or 'nullFlavor' attribute. Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@code and normalize-space(@code) = ''">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test Result - The 'value' tag 'code' attribute shall contain a
                value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@codeSystem and normalize-space(@codeSystem) = ''">Error: e-Discharge
                Summary - 7.1.1.5.1 Pathology Test Result - The 'value' tag 'codeSystem' attribute
                shall contain a value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@codeSystemName and normalize-space(@codeSystemName) = ''">Error:
                e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'value' tag
                'codeSystemName' attribute shall contain a value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@displayName and normalize-space(@displayName) = ''">Error: e-Discharge
                Summary - 7.1.1.5.1 Pathology Test Result - The 'value' tag 'displayName' attribute
                shall contain a value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <report test="cda:translation and normalize-space(cda:translation) = ''">Error:
                e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'translation' tag shall contain a value. 
                Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>


        <!--Pathological Diagnosis - 0..* - errors -->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:observation/cda:code/@code='88101002']">

            <assert test="@typeCode = 'REFR'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'typeCode' attribute shall contain the value 'REFR'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:observation) > 1">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'observation' tag shall appear only once. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>
        
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:observation[cda:code/@code='88101002']">
            

            <assert test="@classCode = 'OBS'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'classCode' attribute shall contain the value 'OBS'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="@moodCode = 'EVN'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'moodCode' attribute shall contain the value 'EVN'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:code) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>


            <!--The Cardinality of value:CD is 1..* inside the path_diag-->
            
            <assert test="cda:value">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'value' tag is missing. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

        </rule>
        
        <rule context="cda:code[@code='88101002']">
                
                <assert test="@codeSystem  = '2.16.840.1.113883.6.96'">Error: e-Discharge Summary -
                    7.1.1.5.1 Pathology Test Result - The 'code' tag 'codeSystem' attribute shall be
                    '2.16.840.1.113883.6.96'. Refer to section 7.1.1.5.1 of the
                    e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
                
                <assert test="@codeSystemVersion  = '20110531'">Error: e-Discharge Summary - 7.1.1.5.1
                    Pathology Test Result - The 'code' tag 'codeSystemVersion' attribute shall be
                    '20110531'. Refer to section 7.1.1.5.1 of the
                    e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
                
                <assert
                    test="translate(@codeSystemName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'SNOMED CT-AU'"
                    > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                    'codeSystemName' attribute shall contain the value 'NCTIS Data Components'. Refer to section
                    7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
                
                <assert
                    test="translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'PATHOLOGY DIAGNOSIS'"
                    > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                    'displayName' attribute shall contain the value 'Pathology Test Result'. Refer to section 7.1.1.5.1
                    of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
                    
                    
        </rule>


        <!--Pathology Test Conclusion - 0..1 - errors -->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:observation/cda:code/@code='386344002']">

            <assert test="@typeCode = 'REFR'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'typeCode' attribute shall contain the value 'REFR'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:observation) > 1">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'observation' tag shall appear only once. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>
        
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:observation[cda:code/@code='386344002']">
            
            <assert test="@classCode = 'OBS'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'classCode' attribute shall contain the value 'OBS'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="@moodCode = 'EVN'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'moodCode' attribute shall contain the value 'EVN'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="cda:id">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -
                The 'id' tag is missing. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!--The id attributes are tested in Global Checks-->

            <report test="count(cda:code) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

          

            <assert test="cda:value">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -
                The 'value' tag is missing. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="cda:value[@xsi:type = 'ST']">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'value' tag 'xsi:type' attribute shall contain the value 'ST'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

        </rule>
        
        <rule context="cda:code[@code='386344002']">
             
             <assert test="@codeSystem  = '2.16.840.1.113883.6.96'">Error: e-Discharge Summary -
                 7.1.1.5.1 Pathology Test Result - The 'code' tag 'codeSystem' attribute shall be
                 '2.16.840.1.113883.6.96'. Refer to section 7.1.1.5.1 of the
                 e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
             
             <assert test="@codeSystemVersion  = '20110531'">Error: e-Discharge Summary - 7.1.1.5.1
                 Pathology Test Result - The 'code' tag 'codeSystemVersion' attribute shall be
                 '20110531'. Refer to section 7.1.1.5.1 of the
                 e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
             
             <assert
                 test="translate(@codeSystemName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'SNOMED CT-AU'"
                 > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                 'codeSystemName' attribute shall contain the value 'NCTIS Data Components'. Refer to section
                 7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
             
             <assert
                 test="translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'LABORATORY FINDINGS DATA INTERPRETATION'"
                 > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                 'displayName' attribute shall contain the value 'Pathology Test Result'. Refer to section 7.1.1.5.1
                 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
                 
        </rule>
        
        
        <!--Test Comment 0..1-->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:act/cda:code/@code='103.16468']">

            <assert test="@typeCode = 'COMP'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'typeCode' attribute shall contain the value 'COMP'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:act) > 1">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'act' tag shall appear only once. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
        </rule>
         
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:act[cda:code/@code='103.16468']">
            
            <assert test="@classCode = 'INFRM'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'act' tag 'classCode' attribute shall contain the value 'INFRM'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert test="@moodCode = 'EVN'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'act' tag 'moodCode' attribute shall contain the value 'EVN'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:code) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <assert test="cda:text">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -
                The 'text' tag is missing. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:text) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'text' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <assert test="cda:text[@xsi:type = 'ST']">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -
                The 'text' tag 'xsi:type' attribute shall contain the value 'ST'. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
          
          
        </rule>
        
        <rule context="cda:code[@code='103.16468']">
            
        
            <assert test="@codeSystem  = '1.2.36.1.2001.1001.101'">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test Result - The 'code' tag 'codeSystem' attribute shall be
                '2.16.840.1.113883.6.96'. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@codeSystemName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'NCTIS DATA COMPONENTS'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'codeSystemName' attribute shall contain the value 'NCTIS Data Components'. Refer to section
                7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'TEST COMMENT'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'displayName' attribute shall contain the value 'Test Comment'. Refer to section 7.1.1.5.1
                of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            
        </rule>
        
        
        <!--Test Request Details 0..*-->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:act/cda:code/@code='102.16160']">
            
            <assert test="@typeCode = 'SUBJ'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'typeCode' attribute shall contain the value 'SUBJ'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert test="@inversionInd = 'true'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'inversionInd' attribute shall contain the value 'true'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:act) > 1">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'act' tag shall appear only once. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
           
        </rule>
        
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:act[cda:code/@code='102.16160']">
            
            <assert test="@classCode = 'ACT'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'act' tag 'classCode' attribute shall contain the value 'ACT'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert test="@moodCode = 'EVN'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'act' tag 'moodCode' attribute shall contain the value 'EVN'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:code) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
        </rule>
         
        <rule context="cda:code[@code='102.16160']">
         
            <assert test="@codeSystem  = '1.2.36.1.2001.1001.101'">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test Result - The 'code' tag 'codeSystem' attribute shall be
                '2.16.840.1.113883.6.96'. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@codeSystemName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'NCTIS DATA COMPONENTS'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'codeSystemName' attribute shall contain the value 'NCTIS Data Components'. Refer to section
                7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'TEST REQUEST DETAILS'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'displayName' attribute shall contain the value 'Test Request Details'. Refer to section 7.1.1.5.1
                of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
        </rule>


        <!--Test Requested Name 0..*--> 
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:act/cda:code/@code='102.16160']/cda:act/cda:entryRelationship[cda:observation/cda:code/@code='103.11017']">

            <assert test="@typeCode = 'COMP'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'typeCode' attribute shall contain the value 'COMP'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:observation) > 1">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'observation' tag shall appear only once. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
        </rule>
      
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:act/cda:code/@code='102.16160']/cda:act/cda:entryRelationship/cda:observation[cda:code/@code='103.11017']">
            
      
            <assert test="@classCode = 'OBS'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'classCode' attribute shall contain the value 'OBS'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert test="@moodCode = 'RQO'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'moodCode' attribute shall contain the value 'RQO'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:code) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            
            <assert test="cda:value[@xsi:type = 'CD']">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -
                The 'value' tag 'xsi:type' attribute shall contain the value 'CD'. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
        </rule> 
              
        <rule context="cda:code[@code='103.11017']">
                        
            <assert test="@codeSystem  = '1.2.36.1.2001.1001.101'">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test Result - The 'code' tag 'codeSystem' attribute shall be
                '2.16.840.1.113883.6.96'. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@codeSystemName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'NCTIS DATA COMPONENTS'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'codeSystemName' attribute shall contain the value 'NCTIS Data Components'. Refer to section
                7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'TEST REQUESTED NAME'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'displayName' attribute shall contain the value 'Test Requested Name'. Refer to section 7.1.1.5.1
                of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
           
        </rule>

        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:act/cda:code/@code='102.16160']/cda:act/cda:entryRelationship/cda:observation[cda:code/@code='103.11017']/cda:value">
     
            <assert test="@xsi:type = 'CD'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'value' tag 'xsi:type' attribute shall contain the value 'CD'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
         
            
            <assert test="cda:originalText or (@code and @codeSystem) or @nullFlavor"> Error:
                e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'value' tag shall have 'originalText' tag or
                'code and codeSystem' or 'nullFlavor' attributes. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
       
            
            <report test="@code and normalize-space(@code) = ''">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test Result - The 'value' tag 'code' attribute shall contain a
                value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <report test="@codeSystem and normalize-space(@codeSystem) = ''">Error: e-Discharge
                Summary - 7.1.1.5.1 Pathology Test Result - The 'value' tag 'codeSystem' attribute
                shall contain a value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <report test="@codeSystemName and normalize-space(@codeSystemName) = ''">Error:
                e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'value' tag
                'codeSystemName' attribute shall contain a value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <report test="@displayName and normalize-space(@displayName) = ''">Error: e-Discharge
                Summary - 7.1.1.5.1 Pathology Test Result - The 'value' tag 'displayName' attribute
                shall contain a value. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
        </rule>
        
        
        <!--Pathology test Result DateTime 1..1 -->
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship[cda:observation/cda:code/@code='103.16605']">
           
            <assert test="@typeCode = 'COMP'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'entryRelationship' tag 'typeCode' attribute shall contain the value 'COMP'.
                Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:observation) > 1">Error: e-Discharge Summary - 7.1.1.5.1
                Pathology Test Result - The 'observation' tag shall appear only once. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
        </rule>
        
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:observation[cda:code/@code='103.16605']">
                    
            <assert test="@classCode = 'OBS'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'classCode' attribute shall contain the value 'OBS'. Refer to
                section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert test="@moodCode = 'EVN'">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test
                Result - The 'observation' tag 'moodCode' attribute shall contain the value 'EVN'. Refer to section
                7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <report test="count(cda:code) > 1">Error: e-Discharge Summary - 7.1.1.5.1 Pathology
                Test Result - The 'code' tag shall appear only once. Refer to section 7.1.1.5.1 of
                the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            
            <assert test="cda:effectiveTime">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -
                The 'effectiveTime' tag is missing. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
             <assert test="not(@nullFlavor)">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result  - The 'observation' tag 'nullFlavor' attribute shall not be
                present. Refer to requirements in the NullFlavor Usage Clarification FAQ and section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4. </assert>
            
        </rule>
        
        <rule context="cda:code[@code='103.16605']">
            
            <assert test="@codeSystem  = '1.2.36.1.2001.1001.101'">Error: e-Discharge Summary -
                7.1.1.5.1 Pathology Test Result - The 'code' tag 'codeSystem' attribute shall be
                '2.16.840.1.113883.6.96'. Refer to section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@codeSystemName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'NCTIS DATA COMPONENTS'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'codeSystemName' attribute shall contain the value 'NCTIS Data Components'. Refer to section
                7.1.1.5.1 of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
            <assert
                test="translate(@displayName, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') = 'PATHOLOGY TEST RESULT DATETIME'"
                > Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result - The 'code' tag
                'displayName' attribute shall contain the value 'Pathology Test Result DateTime'. Refer to section 7.1.1.5.1
                of the e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            
             <assert test="not(@nullFlavor)">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -  The 'code' tag 'nullFlavor' attribute shall not be
                present. Refer to requirements in the NullFlavor Usage Clarification FAQ and section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4. </assert>
          
        </rule>
        
        <rule context="/cda:ClinicalDocument/cda:component/cda:structuredBody/cda:component/cda:section[cda:code/@code='101.16006']/cda:component/cda:section[cda:code/@code='101.20117']/cda:component/cda:section[cda:code/@code='102.16144']/cda:entry/cda:observation[@classCode='OBS']/cda:entryRelationship/cda:observation[cda:code/@code='103.16605']/cda:effectiveTime">
         
         <assert test="not(@nullFlavor)">Error: e-Discharge Summary - 7.1.1.5.1 Pathology Test Result -  The 'effectiveTime' tag 'nullFlavor' attribute shall not be
                present. Refer to requirements in the NullFlavor Usage Clarification FAQ and section 7.1.1.5.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4. </assert>
         
        </rule>
        
    </pattern>
