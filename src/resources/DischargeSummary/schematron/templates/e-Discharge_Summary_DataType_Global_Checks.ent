
    <!-- ================================================================ -->
    <!-- PLEASE DON'T EDIT THIS FILE. ITS CODE IS GENERATED FROM TEMPLATE -->
    <!-- AND IS UNIFORM ACROSS ALL PACKAGES.                              -->
    <!-- ================================================================ -->

    <!-- e-Discharge Summary Clinical Document: DataType Global Checks -->

    <!-- Context: ClinicalDocument -->

    <!-- Status: Last Reviewed:
         Status: Last Updated : 3/12/2012 -->


    <pattern name="p-e-Discharge_Summary_DataType_Global_Checks-errors"
        id="p-e-Discharge_Summary_DataType_Global_Checks-errors"
        see="#p-e-Discharge_Summary_DataType_Global_Checks-errors">


        <!-- BEGIN :: Common Patterns: cda:value[@xsi:type = 'BL'] DataType -->

        <rule context="cda:value[@xsi:type='BL']">

            <assert test="@nullFlavor or @value"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value" -
                The 'value' tag shall have at least the 'nullFlavor' or
                'value' attribute. Check all 'cda:value' tags with 'xsi:type=BL'
                attribute to find the missing 'nullFlavor' or 'value' attribute.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@nullFlavor and normalize-space(@nullFlavor) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@nullFlavor" -
                The 'value' tag 'nullFlavor' attribute
                shall contain a value. Check all 'cda:value' tags with 'xsi:type=BL'
                attribute to find the 'nullFlavor' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@value and normalize-space(@value) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=BL' attribute to find the
                'value' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="
                @value and
                normalize-space(@value) != '' and
                @value != 'true' and
                @value != 'false'
                ">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain the value 'true' or 'false'.
                Check all 'cda:value' tags with 'xsi:type=BL' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!--
            <report test="
                @value and
                normalize-space(@value) != '' and
                translate(@value, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') != 'TRUE' and
                translate(@value, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') != 'FALSE'
                ">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain the value 'true' or 'false'.
                Check all 'cda:value' tags with 'xsi:type=BL' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>
            -->

        </rule>




        <!-- BEGIN :: Common Patterns: cda:value[@xsi:type = 'CD'] DataType -->

        <rule context="cda:value[@xsi:type='CD']">

            <!--
            <assert test="normalize-space(@xsi:type) != ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'xsi:type' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=CD' attribute to find
                the attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="
                normalize-space(@xsi:type) = '' or
                @xsi:type = 'CD' "
                >Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'xsi:type' attribute shall contain the value 'CD'.
                Check all 'cda:value' tags with 'xsi:type=CD' attribute to find
                the attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>
            -->

            <report test="cda:originalText and normalize-space(cda:originalText) = ''"
                >Error: e-Discharge Summary - Global Clinical Document check for
                "cda:value/cda:originalText" - The 'originalText' tag shall contain a value.
                Check all 'cda:value/cda:originalText' tags to find the missing text.
                Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="count(cda:originalText) > 1"
                >Error: e-Discharge Summary - Global Clinical Document check for
                "cda:value/cda:originalText" - The 'originalText' tag shall appear only once.
                Check all 'cda:value/cda:originalText' tags to find the duplicate text.
                Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <assert test="
                cda:originalText or (@code and @codeSystem) or @nullFlavor"
                >Error: e-Discharge Summary - Global Clinical Document check for
                "cda:value/@code" attribute - The 'value' tag shall have 'originalText' or
                'code and codeSystem' or 'nullFlavor' attributes.
                Check all 'cda:value' tags to find the missing tag or attribute.
                Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@nullFlavor and normalize-space(@nullFlavor) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@nullFlavor" -
                The 'value' tag 'nullFlavor' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=CD' attribute to find
                the 'nullFlavor' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@code and normalize-space(@code) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@code" attribute -
                The 'value' tag 'code' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=CD' attribute to find
                the 'code' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@codeSystem and normalize-space(@codeSystem) = ''"
                >Error: e-Discharge Summary - Global Clinical Document check for
                "cda:value/@codeSystem" attribute - The 'value' tag 'codeSystem' attribute
                shall contain a value. Check all 'cda:value' tags 'codeSystem' attributes to
                find the missing value. Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- codeSystemName can't be present but empty -->
            <report test="@codeSystemName and normalize-space(@codeSystemName) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@codeSystemName" attribute -
                The 'value' tag 'codeSystemName' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=CD' attribute to find
                the 'codeSystemName' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>


            <!-- displayname can't be empty -->
            <report test="@displayName and normalize-space(@displayName) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@displayName" attribute -
                The 'value' tag 'displayName' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=CD' attribute to find
                the 'displayName' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>


        <rule context="cda:value[@xsi:type='CD']/cda:translation">

            <assert test="@code and @codeSystem or (@nullFlavor='OTH' and @codeSystem)"
                >Error: e-Discharge Summary - Global Clinical Document check for
                "cda:value/cda:translation" attributes - The 'translation' tag shall have
                'value' and 'codeSystem' attributes. Check all 'cda:value/cda:translation' tags
                to find the missing tag or attribute. Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@nullFlavor and normalize-space(@nullFlavor) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:translation/@nullFlavor" attribute -
                The 'translation' tag 'nullFlavor' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=CD' attribute to find
                the 'translation' child tag 'nullFlavor' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@code and normalize-space(@code) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:translation/@code" attribute -
                The 'translation' tag 'code' attribute shall contain a value.
                Check all 'cda:value' with 'xsi:type=CD' attribute to find
                the 'translation' child tag 'code' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@codeSystem and normalize-space(@codeSystem) = ''"
                >Error: e-Discharge Summary - Global Clinical Document check for
                "cda:value/cda:translation/@codeSystem" attribute - The 'translation' tag
                'codeSystem' attribute shall contain a value. Check all
                'cda:value/cda:translation' tags 'codeSystem' attributes to find the missing
                value. Refer to section 8.1 of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>


            <!-- codeSystemName can't be present but empty -->
            <report test="@codeSystemName and normalize-space(@codeSystemName) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:translation/@codeSystemName" attribute -
                The 'translation' tag 'codeSystemName' attribute shall contain a value.
                Check all 'cda:value' with 'xsi:type=CD' attribute to find
                the 'translation' child tag 'codeSystemName' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- displayname can't be empty -->
            <report test="@displayName and normalize-space(@displayName) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:translation/@displayName" attribute -
                The 'translation' tag 'displayName' attribute shall contain a value.
                Check all 'cda:value' with 'xsi:type=CD' attribute to find
                the 'translation' child tag 'displayName' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>




        <!-- BEGIN :: Common Patterns: cda:value[@xsi:type = 'CS'] DataType -->

        <rule context="cda:value[@xsi:type='CS']">

            <assert test="@code">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'code' attribute is missing.
                Check all 'cda:value' tags with 'xsi:type=CS' attribute to find the
                missing 'code' attribute. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="not(@code) or normalize-space(@code) != ''">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'code' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=CS' attribute to find the
                'code' attribute of missing value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

        </rule>




        <!-- BEGIN :: Common Patterns: cda:value[@xsi:type = 'INT'] DataType -->

        <rule context="cda:value[@xsi:type='INT']">

            <assert test="@nullFlavor or @value"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value" -
                The 'value' tag shall have at least the 'nullFlavor' or
                the 'value' attribute. Check all 'cda:value' tags with 'xsi:type=INT'
                attribute to find the missing 'nullFlavor' or 'value' attribute.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@nullFlavor and normalize-space(@nullFlavor) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@nullFlavor" -
                The 'value' tag 'nullFlavor' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=INT' attribute to find the
                'nullFlavor' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@value and normalize-space(@value) = ''">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=INT' attribute to find the
                'value' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="
                @value and
                normalize-space(@value) != '' and
                number(@value) != floor(@value)
                ">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain an integer value.
                Check all 'cda:value' tags with 'xsi:type=INT' attribute to find the
                'value' attribute of incorrect datatype.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>




        <!-- BEGIN :: Common Patterns: cda:value[@xsi:type = 'PN'] DataType -->

        <rule context="cda:value[@xsi:type='PN']">

            <assert test="@nullFlavor or cda:family or cda:given"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value" -
                The 'value' tag shall have at least the 'family' and/or 'given' name tag
                or the 'nullFlavor' attribute.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                missing 'nullFlavor' attribute or 'family and/or given' child tag.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@nullFlavor and normalize-space(@nullFlavor) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@nullFlavor" -
                The 'value' tag 'nullFlavor' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                'nullFlavor' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="cda:delimiter and normalize-space(cda:delimiter ) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:delimiter" tag -
                The 'delimiter' tag shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                'delimiter' child tag have value missing. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="count(cda:family) > 1"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:family" -
                The 'family' tag shall appear only once.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                duplicate 'family' child tag. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <assert test="not(cda:family) or normalize-space(cda:family) != ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:family" -
                The 'family' tag shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                'family' child tag have value missing. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="cda:given and normalize-space(cda:given) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:given" -
                The 'given' tag shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                'given' child tag have value missing. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="cda:prefix and normalize-space(cda:prefix ) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:prefix" tag -
                The 'prefix' tag shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                'prefix' child tag have value missing. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="cda:suffix and normalize-space(cda:suffix) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:suffix" tag -
                The 'suffix' tag shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                'suffix' child tag have value missing. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="cda:validTime and not(cda:validTime/child::*)"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/cda:validTime" -
                The child tag(s) of 'validTime' tag is missing.
                Check all 'cda:value' tags with 'xsi:type=PN' attribute to find the
                'validTime' child tag have child tag missing. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- @use is optional, it also can exist and be blank -->
            <!-- Shall we check the @use vocabs, using AS 5017-2006: Health Care Client Name Usage or HL7 V3 DataType -->

        </rule>




        <!-- BEGIN :: Common Patterns: cda:value[@xsi:type = 'PQ'] DataType -->

        <rule context="cda:value[@xsi:type='PQ']">

            <assert test="@nullFlavor or @value"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value" -
                The 'value' tag shall have at least the 'nullFlavor' or the 'value' attribute.
                Check all 'cda:value' tags with 'xsi:type=PQ' attribute to find the
                missing 'nullFlavor' or 'value' attribute. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@nullFlavor and normalize-space(@nullFlavor) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@nullFlavor" -
                The 'value' tag 'nullFlavor' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PQ' attribute to find the
                'nullFlavor' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@value and normalize-space(@value) = ''">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PQ' attribute to find the
                'value' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@unit and normalize-space(@unit) = ''">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'unit' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PQ' attribute to find the
                'unit' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@unit and not(@value)">Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute is missing for the existence of 'unit' attribute.
                Check all 'cda:value' tags with 'xsi:type=PQ' attribute to find the
                'unit' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>




        <!-- BEGIN :: Common Patterns: cda:value[@xsi:type = 'PIVL_TS']
                                       cda:value[@xsi:type = 'IVL_TS']
                                       cda:value[@xsi:type = 'TS'] DataType -->

        <!--
        ISO 8601 time syntax : 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
         -->
        <rule context="cda:value[@xsi:type='PIVL_TS' or @xsi:type='IVL_TS' or @xsitype='TS']">

            <!-- A simple timestamp (point in time) will only contain a value attribute containing the time value, expressed as a series of digits as long as required or available.-->

            <assert test="
                @value or cda:low or cda:high or cda:width or cda:frequency or
                @nullFlavor"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value" -
                The 'value' tag shall have at least the 'value' or 'nullFlavor'
                attribute or 'low' or 'high' or 'centre' or 'width' child tag.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the missing
                'nullFlavor' attribute or 'value' or 'low' or 'high' or 'centre'
                or 'width' child tag. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="@nullFlavor and normalize-space(@nullFlavor) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "cda:value/@nullFlavor" -
                The 'value' tag 'nullFlavor' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'nullFlavor' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="@value and normalize-space(@value) = ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of missing value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>


            <!-- Any time that is more specific than a day SHALL include a timezone. -->
            <report test="
                @value                      and
                string-length(@value) > 8   and
                not(contains(@value,'+'))   and not(contains(@value,'-'))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for value datatype -
                The 'value' tag 'value' attribute shall contain a timezone value.
                "Any time that is more specific than a day SHALL include a timezone".
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- check value of time with fraction of seconds, with or without timezone
                 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                  ^^^^^^^^^^^^^^                                                    -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'.'))    or
                ((string(number(substring-before(@value,'.'))) != string(number(@value))) and
                (string-length(substring-before(@value,'.')) = 14))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect DateTime -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check fraction of second value, with a '+' timezone
                 'YYYYMMDDHHMMSS.UUUU+ZZzz'
                                 ^^^^                            -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'+'))    or
                not(contains(@value,'.'))    or
                ((string(number(substring-before(substring-after(@value,'.'),'+'))) != string(number(@value))) and
                (string-length(substring-before(substring-after(@value,'.'),'+')) = 4))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect fraction of second -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check fraction of second value, with a '-' timezone
                 'YYYYMMDDHHMMSS.UUUU-ZZzz'
                                 ^^^^                            -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'-'))    or
                not(contains(@value,'.'))    or
                ((string(number(substring-before(substring-after(@value,'.'),'-'))) != string(number(@value))) and
                (string-length(substring-before(substring-after(@value,'.'),'-')) = 4))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect fraction of second -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of time without fraction of seconds, and with a '+' timezone
                 'YYYYMMDDHHMM+ZZzz' or 'YYYYMMDDHHMMSS+ZZzz'
                  ^^^^^^^^^^^^           ^^^^^^^^^^^^^^                               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                contains(@value,'.')         or
                not(contains(@value,'+'))    or
                ((string(number(substring-before(@value,'+'))) != string(number(@value))) and
                (string-length(substring-before(@value,'+')) > 11) and
                (string-length(substring-before(@value,'+')) &lt; 15) and
                (string-length(substring-before(@value,'+')) mod 2 = 0))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect DateTime -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of time without fraction of seconds, and with a '-' timezone
                 'YYYYMMDDHHMM-ZZzz' or 'YYYYMMDDHHMMSS-ZZzz'
                  ^^^^^^^^^^^^           ^^^^^^^^^^^^^^                               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                contains(@value,'.')         or
                not(contains(@value,'-'))    or
                ((string(number(substring-before(@value,'-'))) != string(number(@value))) and
                (string-length(substring-before(@value,'-')) > 11) and
                (string-length(substring-before(@value,'-')) &lt; 15) and
                (string-length(substring-before(@value,'-')) mod 2 = 0))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect DateTime -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of timezone with a '+' timezone
                 'YYYYMMDDHHMMSS.UUUU+ZZzz'
                                      ^^^^               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'+'))    or
                ((string(number(substring-after(@value,'+'))) != string(number(@value))) and
                ((string-length(substring-after(@value,'+')) = 2) or (string-length(substring-after(@value,'+')) = 4)))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect TimeZone -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of timezone with a '-' timezone
                 'YYYYMMDDHHMMSS.UUUU-ZZzz'
                                      ^^^^               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'-'))    or
                ((string(number(substring-after(@value,'-'))) != string(number(@value))) and
                ((string-length(substring-after(@value,'-')) = 2) or (string-length(substring-after(@value,'-')) = 4)))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect TimeZone -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of time without fraction of seconds, and without timezone (could safely assume year only)
                 'YYYYMMDD'
                  ^^^^                                                                                             -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                contains(@value,'.')         or
                contains(@value,'+')         or
                contains(@value,'-')         or
                ((string(number(@value)) != string(number('a'))) and
                (string-length(@value) >= 4))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect DateTime -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of year, assume years from 19xx - 20xx
                 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                  ^^^^                                             -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                ((number(substring(@value,1,2)) >= 19) and
                (number(substring(@value,1,2)) &lt; 21))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Year -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of month, from 1 to 12
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                     ^^                                            -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(@value) &lt; 5 or
                ((number(substring(@value,5,2)) >= 1) and
                (number(substring(@value,5,2)) &lt; 13))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Month -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 1,3,5,7,8,10,12 shall be from 1 to 31
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                                     -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 2     or
                number(substring(@value,5,2)) = 4     or
                number(substring(@value,5,2)) = 6     or
                number(substring(@value,5,2)) = 9     or
                number(substring(@value,5,2)) = 11    or
                number(substring(@value,5,2)) > 12    or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 32))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Date -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 4,6,9,11 shall be from 1 to 30
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                              -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 1     or
                number(substring(@value,5,2)) = 2     or
                number(substring(@value,5,2)) = 3     or
                number(substring(@value,5,2)) = 5     or
                number(substring(@value,5,2)) = 7     or
                number(substring(@value,5,2)) = 8     or
                number(substring(@value,5,2)) = 10    or
                number(substring(@value,5,2)) = 12    or
                number(substring(@value,5,2)) > 12    or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 31))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Month -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 2 shall be from 1 to 29 if leap year
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                                    -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 1     or
                number(substring(@value,5,2)) = 3     or
                number(substring(@value,5,2)) = 4     or
                number(substring(@value,5,2)) = 5     or
                number(substring(@value,5,2)) = 6     or
                number(substring(@value,5,2)) = 7     or
                number(substring(@value,5,2)) = 8     or
                number(substring(@value,5,2)) = 9     or
                number(substring(@value,5,2)) = 10    or
                number(substring(@value,5,2)) = 11    or
                number(substring(@value,5,2)) = 12    or
                number(substring(@value,5,2)) > 12    or
                (number(substring(@value,1,4)) mod 4) != 0 or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 30))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Date -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 2 shall be from 1 to 28 if not leap year
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                                        -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 1     or
                number(substring(@value,5,2)) = 3     or
                number(substring(@value,5,2)) = 4     or
                number(substring(@value,5,2)) = 5     or
                number(substring(@value,5,2)) = 6     or
                number(substring(@value,5,2)) = 7     or
                number(substring(@value,5,2)) = 8     or
                number(substring(@value,5,2)) = 9     or
                number(substring(@value,5,2)) = 10    or
                number(substring(@value,5,2)) = 11    or
                number(substring(@value,5,2)) = 12    or
                number(substring(@value,5,2)) > 12    or
                (number(substring(@value,1,4)) mod 4) = 0 or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 29))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Date -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of hour, from 0 to 23
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                         ^^                                        -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(substring-before(translate(@value, '-', '+'),'+')) &lt; 9 or
                ((number(substring(@value,9,2)) >= 0) and
                (number(substring(@value,9,2)) &lt; 24))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Hour -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of minute, from 0 to 59
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                           ^^                                      -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(substring-before(translate(@value, '-', '+'),'+')) &lt; 11 or
                ((number(substring(@value,11,2)) >= 0) and
                (number(substring(@value,11,2)) &lt; 60))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Minute -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of second, from 0 to 59
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                             ^^                                    -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(substring-before(translate(@value, '-', '+'),'+')) &lt; 13 or
                ((number(substring(@value,13,2)) >= 0) and
                (number(substring(@value,13,2)) &lt; 60))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Second -
                The 'value' tag 'value' attribute shall be a number
                formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'value' attribute of incorrect value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <report test="count(cda:low) > 1"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'low' tag shall appear only once.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                duplicate 'low' child tag. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="count(cda:high) > 1"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'high' tag shall appear only once.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                duplicate 'high' child tag. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="count(cda:centre) > 1"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'centre' tag shall appear only once.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                duplicate 'centre' child tag. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <report test="count(cda:width) > 1"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'width' tag shall appear only once.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                duplicate 'width' child tag. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- The 'centre' tag is used with 'width' tag, but should not be coexist with 'low' or 'high' tag -->

            <report test="cda:center and (cda:low or cda:high)"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'value' tag shall have 'center' or 'low and/or high' tag
                but not both.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                incorrect use of 'centre' child tag. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!--The period of time pattern is defined in terms of both of its lowest and highest values.
                we need to ensure value in low is not greater than value in high -->

            <!-- check value of time with fraction of seconds, with '+' timezone
                 'YYYYMMDDHHMMSS.UUUU+ZZzz'
                  ^^^^^^^^^^^^^^^^^^^                                        -->
            <report test="
                cda:low  and cda:low/@value            and
                cda:high and cda:high/@value           and
                normalize-space(cda:low/@value)  != '' and
                normalize-space(cda:high/@value) != '' and
                contains(cda:low/@value,'.')           and
                contains(cda:high/@value, '.')         and
                contains(cda:low/@value,'+')           and
                contains(cda:high/@value, '+')         and
                (number(substring-before(cda:low/@value,'.')) +
                number(substring-after(substring-before(cda:low/@value,'+'),'.')) >
                number(substring-before(cda:high/@value,'.')) +
                number(substring-after(substring-before(cda:high/@value,'+'),'.')))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'low' tag 'value' attribute shall be a value less than than the
                'high' tag 'value' attribute.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'low' and 'high' child tags having incorrect attribute value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- check value of time with fraction of seconds, with '-' timezone
                 'YYYYMMDDHHMMSS.UUUU-ZZzz'
                  ^^^^^^^^^^^^^^^^^^^                                        -->
            <report test="
                cda:low  and cda:low/@value            and
                cda:high and cda:high/@value           and
                normalize-space(cda:low/@value)  != '' and
                normalize-space(cda:high/@value) != '' and
                contains(cda:low/@value,'.')           and
                contains(cda:high/@value, '.')         and
                contains(cda:low/@value,'-')           and
                contains(cda:high/@value, '-')         and
                (number(substring-before(cda:low/@value,'.')) +
                number(substring-after(substring-before(cda:low/@value,'-'),'.')) >
                number(substring-before(cda:high/@value,'.')) +
                number(substring-after(substring-before(cda:high/@value,'-'),'.')))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'low' tag 'value' attribute shall contain a value less than than the
                'high' tag 'value' attribute.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'low' and 'high' child tags having incorrect attribute value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- check value of time without fraction of seconds, with '+' timezone
                 'YYYYMMDDHHMM+ZZzz' or 'YYYYMMDDHHMMSS+ZZzz'
                  ^^^^^^^^^^^^           ^^^^^^^^^^^^^^                         -->
            <report test="
                cda:low  and cda:low/@value            and
                cda:high and cda:high/@value           and
                normalize-space(cda:low/@value)  != '' and
                normalize-space(cda:high/@value) != '' and
                contains(cda:low/@value, '+')          and
                contains(cda:high/@value,'+')          and
                (number(substring-before(cda:low/@value,'+')) > number(substring-before(cda:high/@value,'+')))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'low' tag 'value' attribute shall contain a value less than than the
                'high' tag 'value' attribute.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'low' and 'high' child tags having incorrect attribute value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- check value of time without fraction of seconds, with '-' timezone
                 'YYYYMMDDHHMM-ZZzz' or 'YYYYMMDDHHMMSS-ZZzz'
                  ^^^^^^^^^^^^           ^^^^^^^^^^^^^^                         -->
            <report test="
                cda:low  and cda:low/@value            and
                cda:high and cda:high/@value           and
                normalize-space(cda:low/@value)  != '' and
                normalize-space(cda:high/@value) != '' and
                contains(cda:low/@value, '-')          and
                contains(cda:high/@value,'-')          and
                (number(substring-before(cda:low/@value,'-')) > number(substring-before(cda:high/@value,'-')))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'low' tag 'value' attribute shall contain a value less than than the
                'high' tag 'value' attribute.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'low' and 'high' child tags having incorrect attribute value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- check value of time without fraction of seconds, and without timezone
                 'YYYYMMDD'
                  ^^^^^^^^                                                         -->
            <report test="
                cda:low  and cda:low/@value            and
                cda:high and cda:high/@value           and
                normalize-space(cda:low/@value)  != '' and
                normalize-space(cda:high/@value) != '' and
                not(contains(cda:low/@value, '+'))     and
                not(contains(cda:high/@value,'+'))     and
                not(contains(cda:low/@value, '-'))     and
                not(contains(cda:high/@value,'-'))     and
                (number(cda:low/@value) > number(cda:high/@value))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'low' tag 'value' attribute shall contain a value less than than the
                'high' tag 'value' attribute.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the
                'low' and 'high' child tags having incorrect attribute value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

        </rule>


        <!--The period of time pattern is defined in terms of one or both of its lowest and highest values. More complex time period concepts can be expressed by combining a high, low, or centre element with a width element.-->

        <!--go to the low, high or centre tags with a time parent-->

        <rule context="cda:value[@xsi:type='PIVS_TS' or @xsi:type='IVL_TS' or @xsitype='TS']/cda:low |
                       cda:value[@xsi:type='PIVS_TS' or @xsi:type='IVL_TS' or @xsitype='TS']/cda:high |
                       cda:value[@xsi:type='PIVS_TS' or @xsi:type='IVL_TS' or @xsitype='TS']/cda:centre">

            <assert test="@value"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute is missing.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low',
                'high' or 'centre' child tags that have 'value' attribute missing.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="not(@value) or normalize-space(@value) != ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low',
                'high' or 'centre' child tags that have empty attribute value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- Any time that is more specific than a day SHALL include a timezone. -->
            <report
                test="@value                and
                string-length(@value) > 8   and
                not(contains(@value,'+'))   and not(contains(@value,'-'))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute shall contain a
                timezone value. "Any time that is more specific than a day SHALL include a timezone".
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</report>

            <!-- check value of time with fraction of seconds, with or without timezone
                 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                  ^^^^^^^^^^^^^^                                                    -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'.'))    or
                ((string(number(substring-before(@value,'.'))) != string(number(@value))) and
                (string-length(substring-before(@value,'.')) = 14))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "time" tag - Incorrect DateTime -
                The 'time/low' or 'time/high' or 'time/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check fraction of second value, with a '+' timezone
                 'YYYYMMDDHHMMSS.UUUU+ZZzz'
                                 ^^^^                            -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'+'))    or
                not(contains(@value,'.'))    or
                ((string(number(substring-before(substring-after(@value,'.'),'+'))) != string(number(@value))) and
                (string-length(substring-before(substring-after(@value,'.'),'+')) = 4))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect fraction of second -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check fraction of second value, with a '-' timezone
                 'YYYYMMDDHHMMSS.UUUU-ZZzz'
                                 ^^^^                            -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'-'))    or
                not(contains(@value,'.'))    or
                ((string(number(substring-before(substring-after(@value,'.'),'-'))) != string(number(@value))) and
                (string-length(substring-before(substring-after(@value,'.'),'-')) = 4))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect fraction of second -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of time without fraction of seconds, and with a '+' timezone
                 'YYYYMMDDHHMM+ZZzz' or 'YYYYMMDDHHMMSS+ZZzz'
                  ^^^^^^^^^^^^           ^^^^^^^^^^^^^^                               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                contains(@value,'.')         or
                not(contains(@value,'+'))    or
                ((string(number(substring-before(@value,'+'))) != string(number(@value))) and
                (string-length(substring-before(@value,'+')) > 11) and
                (string-length(substring-before(@value,'+')) &lt; 15) and
                (string-length(substring-before(@value,'+')) mod 2 = 0))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect DateTime -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of time without fraction of seconds, and with a '-' timezone
                 'YYYYMMDDHHMM-ZZzz' or 'YYYYMMDDHHMMSS-ZZzz'
                  ^^^^^^^^^^^^           ^^^^^^^^^^^^^^                               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                contains(@value,'.')         or
                not(contains(@value,'-'))    or
                ((string(number(substring-before(@value,'-'))) != string(number(@value))) and
                (string-length(substring-before(@value,'-')) > 11) and
                (string-length(substring-before(@value,'-')) &lt; 15) and
                (string-length(substring-before(@value,'-')) mod 2 = 0))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect DateTime -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of timezone with a '+' timezone
                 'YYYYMMDDHHMMSS.UUUU+ZZzz'
                                      ^^^^               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'+'))    or
                ((string(number(substring-after(@value,'+'))) != string(number(@value))) and
                ((string-length(substring-after(@value,'+')) = 2) or (string-length(substring-after(@value,'+')) = 4)))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect TimeZone -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of timezone with a '-' timezone
                 'YYYYMMDDHHMMSS.UUUU-ZZzz'
                                      ^^^^               -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                not(contains(@value,'-'))    or
                ((string(number(substring-after(@value,'-'))) != string(number(@value))) and
                ((string-length(substring-after(@value,'-')) = 2) or (string-length(substring-after(@value,'-')) = 4)))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect TimeZone -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of time without fraction of seconds, and without timezone (could safely assume year only)
                 'YYYYMMDD'
                  ^^^^                                                                                             -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                contains(@value,'.')         or
                contains(@value,'+')         or
                contains(@value,'-')         or
                ((string(number(@value)) != string(number('a'))) and
                (string-length(@value) >= 4))"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect DateTime -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of year, assume years from 19xx - 20xx
                 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                  ^^^^                                             -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                ((number(substring(@value,1,2)) >= 19) and
                (number(substring(@value,1,2)) &lt; 21))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Year -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of month, from 1 to 12
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                     ^^                                            -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(@value) &lt; 5 or
                ((number(substring(@value,5,2)) >= 1) and
                (number(substring(@value,5,2)) &lt; 13))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Month -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 1,3,5,7,8,10,12 shall be from 1 to 31
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                                     -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 2     or
                number(substring(@value,5,2)) = 4     or
                number(substring(@value,5,2)) = 6     or
                number(substring(@value,5,2)) = 9     or
                number(substring(@value,5,2)) = 11    or
                number(substring(@value,5,2)) > 12    or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 32))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Date -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 4,6,9,11 shall be from 1 to 30
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                              -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 1     or
                number(substring(@value,5,2)) = 2     or
                number(substring(@value,5,2)) = 3     or
                number(substring(@value,5,2)) = 5     or
                number(substring(@value,5,2)) = 7     or
                number(substring(@value,5,2)) = 8     or
                number(substring(@value,5,2)) = 10    or
                number(substring(@value,5,2)) = 12    or
                number(substring(@value,5,2)) > 12    or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 31))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Month -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 2 shall be from 1 to 29 if leap year
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                                    -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 1     or
                number(substring(@value,5,2)) = 3     or
                number(substring(@value,5,2)) = 4     or
                number(substring(@value,5,2)) = 5     or
                number(substring(@value,5,2)) = 6     or
                number(substring(@value,5,2)) = 7     or
                number(substring(@value,5,2)) = 8     or
                number(substring(@value,5,2)) = 9     or
                number(substring(@value,5,2)) = 10    or
                number(substring(@value,5,2)) = 11    or
                number(substring(@value,5,2)) = 12    or
                number(substring(@value,5,2)) > 12    or
                (number(substring(@value,1,4)) mod 4) != 0 or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 30))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Date -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of date, month 2 shall be from 1 to 28 if not leap year
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                       ^^                                                        -->
            <assert test="
                not(@value)                           or
                normalize-space(@value) = ''          or
                string-length(@value) &lt; 7          or
                number(substring(@value,5,2)) = 1     or
                number(substring(@value,5,2)) = 3     or
                number(substring(@value,5,2)) = 4     or
                number(substring(@value,5,2)) = 5     or
                number(substring(@value,5,2)) = 6     or
                number(substring(@value,5,2)) = 7     or
                number(substring(@value,5,2)) = 8     or
                number(substring(@value,5,2)) = 9     or
                number(substring(@value,5,2)) = 10    or
                number(substring(@value,5,2)) = 11    or
                number(substring(@value,5,2)) = 12    or
                number(substring(@value,5,2)) > 12    or
                (number(substring(@value,1,4)) mod 4) = 0 or
                ((number(substring(@value,7,2)) >= 1) and
                (number(substring(@value,7,2)) &lt; 29))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Date -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of hour, from 0 to 23
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                         ^^                                        -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(substring-before(translate(@value, '-', '+'),'+')) &lt; 9 or
                ((number(substring(@value,9,2)) >= 0) and
                (number(substring(@value,9,2)) &lt; 24))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Hour -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of minute, from 0 to 59
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                           ^^                                      -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(substring-before(translate(@value, '-', '+'),'+')) &lt; 11 or
                ((number(substring(@value,11,2)) >= 0) and
                (number(substring(@value,11,2)) &lt; 60))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Minute -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <!-- check value of second, from 0 to 59
                'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'
                             ^^                                    -->
            <assert test="
                not(@value)                  or
                normalize-space(@value) = '' or
                string-length(substring-before(translate(@value, '-', '+'),'+')) &lt; 13 or
                ((number(substring(@value,13,2)) >= 0) and
                (number(substring(@value,13,2)) &lt; 60))
                "
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag - Incorrect Second -
                The 'value/low' or 'value/high' or 'value/centre' tag 'value' attribute
                shall be a number formatted as 'YYYYMMDDHHMMSS.UUUU[+|-ZZzz]'.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'low', high'
                or 'centre' child tags that have 'value' attribute of incorrect value.
                Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

        </rule>


        <rule context=" cda:value[@xsi:type='PIVL_TS' or @xsi:type='IVL_TS' or @xsitype='TS']/cda:width">

            <assert test="@value"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'value/width' tag 'value' attribute is missing.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'width'
                child tags that have 'value' attribute missing. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="not(@value) or normalize-space(@value) != ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'value/width' tag 'value' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'width'
                child tags that have empty attribute value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

            <assert test="not(@unit) or normalize-space(@unit) != ''"
                >Error: e-Discharge Summary -
                Global Clinical Document check for "value" tag -
                The 'value/width' tag 'unit' attribute shall contain a value.
                Check all 'cda:value' tags with 'xsi:type=PIVL_TS' or
                'xsi:type=IVL_TS' or 'xsi:type=TS' attribute to find the 'width'
                child tags that have empty attribute value. Refer to sections of the
                e-Discharge_Summary_CDA_Implementation_Guide_v3.4.</assert>

        </rule>







    </pattern>

